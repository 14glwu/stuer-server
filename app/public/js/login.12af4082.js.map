{"version":3,"sources":["webpack:///./src/pages/sso/views/login.vue?7e9d","webpack:///./src/pages/sso/views/login.vue?5954","webpack:///src/pages/sso/views/login.vue","webpack:///./src/pages/sso/views/login.vue?1f75","webpack:///./src/pages/sso/views/login.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_style_index_0_id_22e6d82c_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_style_index_0_id_22e6d82c_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","aria-hidden","xlink:href","_v","on","click","routeToSignUp","ref","model","form","rules","label-width","status-icon","prop","placeholder","type","value","callback","$$v","$set","expression","show-password","href","forgotHref","login","staticRenderFns","loginvue_type_script_lang_js_","data","validateEmail","rule","mailReg","Error","test","email","password","validator","trigger","required","message","min","max","computed","$route","query","redirect","concat","methods","$router","push","name","_login2","Object","asyncToGenerator","regeneratorRuntime","mark","_callee2","_this","wrap","_context2","prev","next","$refs","loginForm","validate","_ref","_callee","valid","_context","api","sent","code","$message","success","window","location","auth_token","error","msg","abrupt","stop","_x","apply","arguments","views_loginvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/login.12af4082.js","sourcesContent":["import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&id=22e6d82c&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&id=22e6d82c&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"tab_head\"},[_c('div',{staticClass:\"tab_head_item tab-selected\"},[_c('svg',{staticClass:\"icon tab-icon\",attrs:{\"aria-hidden\":\"true\"}},[_c('use',{attrs:{\"xlink:href\":\"#icon-login\"}})]),_c('h2',{staticClass:\"title\"},[_vm._v(\"登录\")])]),_c('div',{staticClass:\"tab_head_item\",on:{\"click\":_vm.routeToSignUp}},[_c('svg',{staticClass:\"icon tab-icon\",attrs:{\"aria-hidden\":\"true\"}},[_c('use',{attrs:{\"xlink:href\":\"#icon-signup\"}})]),_c('h2',{staticClass:\"title\"},[_vm._v(\"注册\")])])]),_c('el-form',{ref:\"loginForm\",staticClass:\"form_container\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules,\"label-width\":\"0\",\"status-icon\":\"\"}},[_c('el-form-item',{staticClass:\"form_item\",attrs:{\"prop\":\"email\"}},[_c('el-input',{staticClass:\"form_input\",attrs:{\"placeholder\":\"邮箱\",\"type\":\"email\"},model:{value:(_vm.form.email),callback:function ($$v) {_vm.$set(_vm.form, \"email\", $$v)},expression:\"form.email\"}})],1),_c('el-form-item',{staticClass:\"form_item\",attrs:{\"prop\":\"password\"}},[_c('el-input',{staticClass:\"form_input\",attrs:{\"placeholder\":\"密码\",\"type\":\"password\",\"show-password\":\"\"},model:{value:(_vm.form.password),callback:function ($$v) {_vm.$set(_vm.form, \"password\", $$v)},expression:\"form.password\"}})],1),_c('el-form-item',{staticClass:\"form_item\"},[_c('div',{staticClass:\"forgotHref\"},[_c('a',{attrs:{\"href\":_vm.forgotHref}},[_vm._v(\"忘记密码?\")])]),_c('el-button',{staticClass:\"login_btn\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.login}},[_vm._v(\"登录\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container\">\n    <div class=\"tab_head\">\n      <div class=\"tab_head_item tab-selected\">\n        <svg class=\"icon tab-icon\" aria-hidden=\"true\">\n          <use xlink:href=\"#icon-login\"></use>\n        </svg>\n        <h2 class=\"title\">登录</h2>\n      </div>\n      <div class=\"tab_head_item\" @click=\"routeToSignUp\">\n        <svg class=\"icon tab-icon\" aria-hidden=\"true\">\n          <use xlink:href=\"#icon-signup\"></use>\n        </svg>\n        <h2 class=\"title\">注册</h2>\n      </div>\n    </div>\n\n    <el-form\n      ref=\"loginForm\"\n      :model=\"form\"\n      :rules=\"rules\"\n      label-width=\"0\"\n      class=\"form_container\"\n      status-icon\n    >\n      <el-form-item class=\"form_item\" prop=\"email\">\n        <el-input v-model=\"form.email\" placeholder=\"邮箱\" class=\"form_input\" type=\"email\"></el-input>\n      </el-form-item>\n      <el-form-item class=\"form_item\" prop=\"password\">\n        <el-input\n          v-model=\"form.password\"\n          placeholder=\"密码\"\n          class=\"form_input\"\n          type=\"password\"\n          show-password\n        ></el-input>\n      </el-form-item>\n      <el-form-item class=\"form_item\">\n        <div class=\"forgotHref\">\n          <a :href=\"forgotHref\">忘记密码?</a>\n        </div>\n        <el-button type=\"primary\" class=\"login_btn\" @click=\"login\">登录</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport { login } from '@/api';\nexport default {\n  data() {\n    const validateEmail = (rule, value, callback) => {\n      const mailReg = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/;\n      if (value === '') {\n        return callback(new Error('邮箱不能为空'));\n      } else if (mailReg.test(value)) {\n        callback();\n      } else {\n        callback(new Error('请输入正确的邮箱格式'));\n      }\n    };\n    return {\n      form: {\n        email: '',\n        password: ''\n      },\n      rules: {\n        email: [{ validator: validateEmail, trigger: 'blur' }],\n        password: [\n          { required: true, message: '请输入密码', trigger: 'blur' },\n          { min: 6, max: 20, message: '密码长度为 6-20 个字符', trigger: 'blur' }\n        ]\n      }\n    };\n  },\n  computed: {\n    forgotHref() {\n      if (this.$route.query.redirect) {\n        return `/sso/forgotPwd?redirect=${this.$route.query.redirect}`;\n      }\n      return '/sso/forgotPwd';\n    }\n  },\n  methods: {\n    routeToSignUp() {\n      this.$router.push({ name: 'signup', query: { redirect: this.$route.query.redirect } });\n    },\n    async login() {\n      this.$refs.loginForm.validate(async (valid) => {\n        if (valid) {\n          const data = await login({\n            email: this.form.email,\n            password: this.form.password\n          });\n          if (data.code === 0) {\n            this.$message.success('登录成功');\n            if (this.$route.query.redirect) {\n              // 如果是从其他平台跳过来的\n              window.location.href = `${this.$route.query.redirect}?&auth_token=${\n                data.data.auth_token\n              }`;\n            } else {\n              // 自己平台的则直接登录\n              window.location.href = '/';\n            }\n          } else {\n            this.$message.error(`登录失败, ${data.msg}`);\n          }\n        } else {\n          this.$message.success('请检验全部填写项是否符合要求');\n          return false;\n        }\n      });\n    }\n  }\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import '~@/style/variables.scss';\n.forgotHref {\n  width: 200px;\n  a {\n    color: $primary-color;\n  }\n}\n.login_btn {\n  width: 200px;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./login.vue?vue&type=template&id=22e6d82c&scoped=true&\"\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&id=22e6d82c&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"22e6d82c\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}