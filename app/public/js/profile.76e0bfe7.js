(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["profile"],{"17b8":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"profile_container"},[t.userExist?a("div",{staticClass:"profile-info block"},[a("div",{staticClass:"profile-info-main"},[t.amI?a("el-upload",{class:t.avatar?"avatar-box":"avatar-uploader",attrs:{action:"/api/uploadImg","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.avatar?a("img",{staticClass:"avatar",attrs:{src:t.avatar}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]):a("div",{staticClass:"avatar-box"},[t.avatar?a("img",{staticClass:"avatar",attrs:{src:t.avatar}}):a("img",{staticClass:"avatar",attrs:{src:t.defaultAvatar}})]),a("div",{staticClass:"info-box"},[a("div",{staticClass:"nickName-box"},[a("h1",{staticClass:"nickName"},[t._v(t._s(t.nickName))]),a("div",{staticClass:"role"},[t._v(t._s(t.roleName))])]),a("div",{staticClass:"personSign-box"},[a("span",{class:{personSign:!0,lineMultiple:t.personSign.length>65},attrs:{title:t.personSign}},[t._v(t._s(t.personSign))])])])],1),a("div",{staticClass:"profile-info-opt"},[t.amI?a("button",{staticClass:"edit-profile-btn",on:{click:t.routeToUserEdit}},[t._v("编辑个人资料")]):t._e()])]):t._e(),t.userExist?a("div",{staticClass:"profile-main"},[a("div",{staticClass:"profile-main-nav block"},[a("ul",{staticClass:"profile-nav"},t._l(t.navs,function(e,r){return a("li",{key:r,class:{"profile-nav-item":!0,active:t.isActive(e.href)}},[a("router-link",{attrs:{to:"/profile/"+t.$route.params.id+e.href}},[a("svg",{staticClass:"icon profile-nav-item-logo",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":e.icon}})]),a("span",[t._v(t._s(e.name))]),a("i",{staticClass:"el-icon-arrow-right icon-right"})])],1)}),0)]),a("div",{staticClass:"profile-main-content block"},[a("router-view")],1)]):t._e(),t.userExist?t._e():a("div",{staticClass:"userNotFound block"},[t._v("用户不存在")]),t.userExist?t._e():a("div",{staticClass:"toIndex"},[a("el-button",{attrs:{type:"primary"},on:{click:t.routeToIndex}},[t._v("返回首页")])],1)])},s=[],i=(a("96cf"),a("3b8d")),n=a("cebc"),o=a("2f62"),c=a("cb15"),u=a.n(c),l=a("365c"),f={inject:["reload"],data:function(){return{defaultAvatar:u.a,navs:[{href:"",icon:"#icon-home",name:"首页"},{href:"/discuss",icon:"#icon-discuss",name:"讨论帖"},{href:"/likes",icon:"#icon-zan",name:"点赞"},{href:"/basicInfo",icon:"#icon-user",name:"基本信息"}],userExist:!0}},computed:Object(n["a"])({},Object(o["b"])(["pageUser","user","amI"]),{avatar:function(){return this.pageUser&&this.pageUser.avatar?this.pageUser.avatar:""},nickName:function(){return this.pageUser&&this.pageUser.nickName?this.pageUser.nickName:"".concat(this.amI?"你":"他","的昵称")},personSign:function(){return this.pageUser&&this.pageUser.personSign?this.pageUser.personSign:"".concat(this.amI?"你":"他","的个性签名/座右铭/人生感悟")},roleName:function(){var t={1:"毕业生",2:"在校生",3:"老师",4:"运营管理员",5:"学校管理员",6:"企业管理员",7:"超级管理员"};return this.pageUser&&this.pageUser.email&&"14glwu@stu.edu.cn"===this.pageUser.email?"Stuer网创始人":this.pageUser&&this.pageUser.role&&t[this.pageUser.role]||"毕业生"}}),watch:{$route:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e,a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.params&&a.params&&e.params.id!==a.params.id&&this.reload();case 1:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}(),pageUser:function(t){var e=this.navs.slice();if(t&&t.role<3){var a=e.some(function(t){return"/moreInfo"===t.href});a||e.push({href:"/moreInfo",icon:"#icon-more-info",name:"更多信息"});e.some(function(t){return"/setting"===t.href});e.some(function(t){return"/setting"===t.href})||e.push({href:"/setting",icon:"#icon-setting",name:"设置"})}t&&t.role>2&&(e=e.filter(function(t){return"/moreInfo"!==t.href})),this.amI||(e=e.filter(function(t){return"/setting"!==t.href}),e=e.filter(function(t){return"/moreInfo"!==t.href})),this.navs=e}},created:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getPageUserInfo();case 2:this.setAmI();case 3:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),methods:{getPageUserInfo:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["f"])(this.$route.params.id);case 2:e=t.sent,0===e.code?this.$store.commit("setPageUser",e.data):2003===e.code&&(this.userExist=!1);case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),setAmI:function(){this.user&&this.pageUser&&this.user.id===this.pageUser.id?this.$store.commit("setAmI",!0):this.$store.commit("setAmI",!1)},handleAvatarSuccess:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e,a){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.code){t.next=6;break}return this.avatar=e.data.fileUrl,t.next=4,Object(l["l"])({avatar:e.data.fileUrl});case 4:r=t.sent,0===r.code&&(this.$store.commit("setPageUser",r.data),this.$store.commit("setUser",r.data));case 6:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}(),beforeAvatarUpload:function(t){var e=t.size/1024/1024<2;return e||this.$message.error("上传头像图片大小不能超过 2MB!"),e},routeToUserEdit:function(){this.$router.push("/profile/".concat(this.$route.params.id,"/basicInfo#edit"))},routeToIndex:function(){this.$router.push("/")},isActive:function(t){return"/"===this.$route.matched[1].path.slice(this.$route.matched[1].path.lastIndexOf("/"))&&""===t||this.$route.matched[1].path.slice(this.$route.matched[1].path.lastIndexOf("/"))===t}}},h=f,p=(a("e52e"),a("2877")),m=Object(p["a"])(h,r,s,!1,null,null,null);e["default"]=m.exports},"7d0d":function(t,e,a){},e52e:function(t,e,a){"use strict";var r=a("7d0d"),s=a.n(r);s.a}}]);
//# sourceMappingURL=profile.76e0bfe7.js.map